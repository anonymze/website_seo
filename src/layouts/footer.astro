---
import { Image } from "astro:assets";
import { Phone, Mail, MapPin, Leaf } from "lucide-react";
import LogoImg from "@/assets/images/logo.png";
import { navItems } from "@/utils/helper";

// Business information with structured data
const businessInfo = {
    name: "Yann Metier",
    profession: "Développeur web",
    phone: "+33 7 52 04 07 71",
    email: "metier.yann@gmail.com",
    address: {
        street: "Capitole",
        city: "Toulouse",
        postalCode: "31000",
        country: "France",
    },
    description:
        "Développeur web professionnel spécialisé dans la création de sites internet modernes et performants.",
    website: "https://yannmetier.fr",
    socialMedia: {
        linkedin: "https://www.linkedin.com/in/yann-metier-147706156",
        facebook: "https://facebook.com/yann.metier",
    },
};

// JSON-LD structured data for enhanced SEO
const jsonLd = {
    "@context": "https://schema.org",
    "@type": "Person",
    name: businessInfo.name,
    jobTitle: businessInfo.profession,
    description: businessInfo.description,
    url: businessInfo.website,
    email: businessInfo.email,
    telephone: businessInfo.phone,
    address: {
        "@type": "PostalAddress",
        streetAddress: businessInfo.address.street,
        addressLocality: businessInfo.address.city,
        postalCode: businessInfo.address.postalCode,
        addressCountry: businessInfo.address.country,
    },
    sameAs: [
        businessInfo.socialMedia.linkedin,
        businessInfo.socialMedia.facebook,
    ],
};
---

<!-- JSON-LD Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />

<footer
    class="bg-gradient-to-b from-card/50 to-card/70 border-t border-border/20 backdrop-blur-lg"
    role="contentinfo"
    aria-label="Informations de contact et navigation du site"
>
    <div class="max-w-6xl mx-auto px-6 sm:px-8 lg:px-12 pt-12 pb-8">
        <div
            class="grid grid-cols-1 md:grid-cols-4 md:gap-12 gap-10 md:justify-items-center"
        >
            <!-- About Section -->
            <section
                class="space-y-10"
                aria-labelledby="about-heading"
                itemscope
                itemtype="https://schema.org/Person"
            >
                <header>
                    <h3
                        id="about-heading"
                        class="flex items-center md:justify-center gap-3 font-bold text-2xl text-foreground mb-10"
                        itemprop="name"
                    >
                        <Image
                            src={LogoImg}
                            width={30}
                            height={30}
                            alt={`Logo de ${businessInfo.name}, développeur web professionnel`}
                            loading="lazy"
                        />
                        {businessInfo.name}
                    </h3>
                </header>
                <p
                    class="text-muted-foreground text-lg leading-relaxed mb-2 md:text-center"
                    itemprop="description"
                >
                    {businessInfo.description}
                </p>
                <meta itemprop="url" content={businessInfo.website} />
                <meta itemprop="jobTitle" content={businessInfo.profession} />
            </section>

            <!-- Site Navigation Section -->
            <nav
                class="space-y-10"
                aria-labelledby="footer-nav-heading"
                role="navigation"
            >
                <header>
                    <h3
                        id="footer-nav-heading"
                        class="font-bold text-2xl text-foreground mb-10 md:text-center"
                    >
                        Navigation
                    </h3>
                </header>
                <ul
                    class="space-y-6 md:flex md:flex-col md:items-center"
                    role="list"
                >
                    {
                        navItems.map((item) => (
                            <li>
                                <a
                                    href={item.href}
                                    title={item.title}
                                    target={item.target ? "_blank" : undefined}
                                    class={`block ${item.target ? 'hover:opacity-80' : 'text-muted-foreground hover:text-primary'} transition-all duration-300 text-lg hover:translate-x-3 py-0.5 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-opacity-50 flex items-center gap-2`}
                                    style={item.target ? 'color: #ff4676' : undefined}
                                >
                                    {item.label}
                                    {item.target && (
                                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                                            <polyline points="15,3 21,3 21,9"/>
                                            <line x1="10" y1="14" x2="21" y2="3"/>
                                        </svg>
                                    )}
                                </a>
                            </li>
                        ))
                    }
                </ul>
            </nav>

            <!-- Contact Information Section -->
            <section class="space-y-10" aria-labelledby="contact-heading">
                <header>
                    <h3
                        id="contact-heading"
                        class="font-bold text-2xl text-foreground mb-10 md:text-center"
                    >
                        Contact
                    </h3>
                </header>
                <address
                    class="not-italic space-y-8"
                    itemscope
                    itemtype="https://schema.org/ContactPoint"
                >
                    <div
                        class="flex items-center space-x-6 text-muted-foreground text-lg"
                    >
                        <div
                            class="w-14 h-14 flex items-center justify-center bg-primary organic-shape"
                            aria-hidden="true"
                        >
                            <Phone
                                className="w-6 h-6 text-white"
                                aria-hidden="true"
                            />
                        </div>
                        <a
                            href={`tel:${businessInfo.phone}`}
                            class="hover:text-primary transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50"
                            itemprop="telephone"
                            rel="nofollow"
                        >
                            {businessInfo.phone}
                        </a>
                    </div>

                    <div
                        class="flex items-center space-x-6 text-muted-foreground text-lg"
                    >
                        <div
                            class="w-14 h-14 flex items-center justify-center bg-primary organic-shape"
                            aria-hidden="true"
                        >
                            <Mail
                                className="w-6 h-6 text-white"
                                aria-hidden="true"
                            />
                        </div>
                        <a
                            href={`mailto:${businessInfo.email}`}
                            class="hover:text-primary transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50"
                            itemprop="email"
                            rel="nofollow"
                        >
                            {businessInfo.email}
                        </a>
                    </div>

                    <div
                        class="flex items-center lg:gap-2 space-x-6 text-muted-foreground text-lg"
                    >
                        <div
                            class="w-14 h-14 flex items-center justify-center bg-primary organic-shape"
                            aria-hidden="true"
                        >
                            <MapPin
                                className="w-6 h-6 text-white"
                                aria-hidden="true"
                            />
                        </div>
                        <span
                            itemprop="address"
                            itemscope
                            itemtype="https://schema.org/PostalAddress"
                        >
                            <span itemprop="streetAddress"
                                >{businessInfo.address.street}</span
                            >,
                            <span itemprop="postalCode"
                                >{businessInfo.address.postalCode}</span
                            >
                            <span itemprop="addressLocality"
                                >{businessInfo.address.city}</span
                            >,
                            <span itemprop="addressCountry"
                                >{businessInfo.address.country}</span
                            >
                        </span>
                    </div>
                    <meta itemprop="contactType" content="customer service" />
                    <meta itemprop="availableLanguage" content="French" />
                </address>
            </section>

            <!-- Social Media Section -->
            <section class="space-y-10" aria-labelledby="social-heading">
                <header>
                    <h3
                        id="social-heading"
                        class="font-bold text-2xl text-foreground mb-10 md:text-center"
                    >
                        Réseaux sociaux
                    </h3>
                </header>
                <div class="flex space-x-6 justify-start md:justify-center">
                    <a
                        href={businessInfo.socialMedia.linkedin}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="w-12 h-12 flex items-center justify-center bg-primary hover:bg-primary/80 transition-colors duration-300 organic-shape focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50"
                        aria-label="Suivre sur LinkedIn"
                    >
                        <svg
                            class="w-6 h-6 text-white"
                            fill="currentColor"
                            viewBox="0 0 24 24"
                            aria-hidden="true"
                        >
                            <path
                                d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
                            ></path>
                        </svg>
                    </a>
                    <a
                        href={businessInfo.socialMedia.facebook}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="w-12 h-12 flex items-center justify-center bg-primary hover:bg-primary/80 transition-colors duration-300 organic-shape focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50"
                        aria-label="Suivre sur Facebook"
                    >
                        <svg
                            class="w-6 h-6 text-white"
                            fill="currentColor"
                            viewBox="0 0 24 24"
                            aria-hidden="true"
                        >
                            <path
                                d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                            ></path>
                        </svg>
                    </a>
                </div>
            </section>
        </div>

        <!-- Copyright Section -->
        <section
            class="border-t border-border/20 pt-8 mt-12 text-center"
            aria-label="Informations de copyright"
        >
            <p
                class="text-muted-foreground text-lg"
                itemscope
                itemtype="https://schema.org/Person"
            >
                © <time datetime="2025" itemprop="copyrightYear">2025</time>
                <span itemprop="name">{businessInfo.name}</span> -
                <span itemprop="description">{businessInfo.profession}</span>.
                Tous droits réservés.
                <meta itemprop="copyrightHolder" content={businessInfo.name} />
                <meta itemprop="inLanguage" content="fr-FR" />
            </p>
        </section>
    </div>
</footer>

<script>
    const year = document.querySelector("[datetime]");

    if (year) {
        const currentYear = new Date().getFullYear().toString();
        year?.setAttribute("datetime", currentYear);
        year.textContent = currentYear;
    }
</script>
